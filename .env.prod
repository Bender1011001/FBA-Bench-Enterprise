# FBA-Bench .env.prod â€” Production environment template
#
# Copy this to .env.prod.local (gitignored) and fill in real values.
# Do not commit secrets. Use Docker secrets or cloud secret managers in production.
#
# Based on .env.example with production-specific overrides.
# Assumes Postgres/Redis setup from docker-compose.prod.yml.
# Add your domain, SSL cert paths, and monitoring endpoints.

# === CORE ENVIRONMENT ===
ENVIRONMENT=production
AUTH_ENABLED=true
AUTH_PROTECT_DOCS=true
AUTH_TEST_BYPASS=false
AUTH_JWT_ALG=RS256
# Replace with your actual RSA public key (PEM) using \n for newlines:
AUTH_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nREPLACE_ME_WITH_YOUR_RSA_PUBLIC_KEY\n-----END PUBLIC KEY-----"
AUTH_JWT_ISSUER=https://your-domain.com
AUTH_JWT_AUDIENCE=fba-bench
AUTH_JWT_CLOCK_SKEW=60

# CORS: Explicit origins for production (no wildcards)
FBA_CORS_ALLOW_ORIGINS=https://your-domain.com,https://app.your-domain.com

# Rate limiting: Stricter for production
API_RATE_LIMIT=50/minute

# Domain for redirects, HSTS, etc.
DOMAIN=prod.example.com

# === DATABASE (Postgres) ===
# These are used by docker-compose.prod.yml
POSTGRES_DB=fba_prod
POSTGRES_USER=fba_prod
POSTGRES_PASSWORD=ChangeMe_Postgres_Prod_#SecurePass123!
PGDATA=/var/lib/postgresql/data/pgdata

# === REDIS ===
REDIS_PASSWORD=ChangeMe_Redis_Prod_#SecurePass456!
# For production Redis with TLS (if using managed service):
# FBA_BENCH_REDIS_URL=rediss://:${REDIS_PASSWORD}@your-redis.example.com:6380/0
# Local/Compose default:
FBA_BENCH_REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# === OBSERVABILITY (OTEL/Prometheus) ===
# OTLP exporter endpoint (points to otel-collector service or external)
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=fba-bench-api
OTEL_RESOURCE_ATTRIBUTES=service.version=1.0.0,deployment.environment=production

# Prometheus scrape config (if not using full OTEL collector)
PROMETHEUS_MULTIPROC_DIR=/tmp
PROMETHEUS_PORT=8001

# Grafana (if self-hosted)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=ChangeMe_Grafana_Prod_#SecurePass789!

# === API/APP CONFIG ===
# Uvicorn workers for production (adjust based on CPU cores)
UVICORN_WORKERS=4
UVICORN_TIMEOUT=120

# Logging level
LOG_LEVEL=INFO

# === SECURITY/SECRETS ===
# JWT private key for signing (keep secret!)
AUTH_JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nREPLACE_ME_WITH_YOUR_RSA_PRIVATE_KEY\n-----END PRIVATE KEY-----"

# Database connection pool (Pydantic/FastAPI)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# === CLOUD/DEPLOYMENT (Optional) ===
# For AWS/GCP/etc. integrations
AWS_REGION=us-west-2
# Or GCP_PROJECT_ID=your-project

# ClearML (if using for experiments)
CLEARML_API_ACCESS_KEY=your_access_key
CLEARML_API_SECRET_KEY=your_secret_key

# === DEVELOPMENT OVERRIDES (comment out or remove in production) ===
# For testing prod config locally:
# ENVIRONMENT=staging
# AUTH_TEST_BYPASS=true
# FBA_CORS_ALLOW_ORIGINS=http://localhost:3000,https://localhost:3000