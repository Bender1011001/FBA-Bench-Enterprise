C:\Users\admin\AppData\Roaming\Python\Python313\site-packages\pytest_asyncio\plugin.py:252: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.3.4, pluggy-1.5.0 -- C:\ProgramData\anaconda3\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\admin\Desktop\GitHub-projects\fba\FBA-Bench-Enterprise\tests
configfile: pytest.ini
plugins: anyio-4.11.0, Faker-37.11.0, asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 3 items

tests\test_conftest_integrity.py::test_db_session_fixture PASSED         [ 33%]
tests\test_conftest_integrity.py::test_test_user_fixture PASSED          [ 66%]
tests\test_conftest_integrity.py::test_client_fixture ERROR              [100%]

=================================== ERRORS ====================================
____________________ ERROR at setup of test_client_fixture ____________________

fixturedef = <FixtureDef argname='app' scope='session' baseid=''>
request = <SubRequest 'app' for <Function test_client_fixture>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)

..\..\..\..\AppData\Roaming\Python\Python313\site-packages\pytest_asyncio\plugin.py:733: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tests\conftest.py:38: in app
    from fba_bench_api.server.app_factory import create_app
src\fba_bench_api\server\app_factory.py:18: in <module>
    from fba_bench_api.api.routes import (
src\fba_bench_api\api\routes\demo.py:12: in <module>
    from fba_bench_api.core.database_async import get_async_db_session
src\fba_bench_api\core\database_async.py:67: in <module>
    async_engine: AsyncEngine = create_async_engine(ASYNC_DATABASE_URL, **_engine_kwargs)
..\..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\ext\asyncio\engine.py:120: in create_async_engine
    sync_engine = _create_engine(url, **kw)
..\..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
..\..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\create.py:617: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

cls = <class 'sqlalchemy.dialects.sqlite.aiosqlite.SQLiteDialect_aiosqlite'>

    @classmethod
    def import_dbapi(cls) -> AsyncAdapt_aiosqlite_dbapi:
        return AsyncAdapt_aiosqlite_dbapi(
>           __import__("aiosqlite"), __import__("sqlite3")
        )
E       ModuleNotFoundError: No module named 'aiosqlite'

..\..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:416: ModuleNotFoundError
============================== warnings summary ===============================
test_conftest_integrity.py::test_client_fixture
  C:\ProgramData\anaconda3\Lib\site-packages\pythonjsonlogger\jsonlogger.py:11: DeprecationWarning: pythonjsonlogger.jsonlogger has been moved to pythonjsonlogger.json
    warnings.warn(

test_conftest_integrity.py::test_client_fixture
  C:\Users\admin\Desktop\GitHub-projects\fba\FBA-Bench-Enterprise\src\fba_bench_core\core\fba_types.py:155: DeprecationWarning: The 'money' package is deprecated; use 'fba_bench_core.money'. This shim will be removed in a future release.
    from money import Money

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
ERROR tests\test_conftest_integrity.py::test_client_fixture - ModuleNotFoundE...
=================== 2 passed, 2 warnings, 1 error in 0.96s ====================
